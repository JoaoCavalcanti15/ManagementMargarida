{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from\"react-router-dom\";import'../styles.css';// Import common styles\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const navigate=useNavigate();// State to store the list of inflatables\nconst[inflatables,setInflatables]=useState([]);// Fetch inflatables data from backend on component mount\nuseEffect(()=>{const fetchInflatables=async()=>{try{const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/inflatables\"));setInflatables(response.data);// Update state with fetched data\n}catch(error){console.error('Error fetching inflatables:',error);}};fetchInflatables();},[]);// Empty dependency array ensures this effect runs only once after initial render\n// Function to handle changing state of an inflatable\nconst handleChangeState=async inflatableId=>{try{console.log('Changing state for inflatableId:',inflatableId);// Send PATCH request to backend to change inflatable state\nconst response=await axios.patch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/inflatable/\").concat(inflatableId,\"/change-state\"));console.log('Response from server:',response.data);// Update local state with the updated inflatable's state\nconst updatedInflatable=response.data;setInflatables(inflatables.map(inflatable=>{if(inflatable._id===updatedInflatable._id){return{...inflatable,state:updatedInflatable.state};}return inflatable;}));}catch(error){console.error('Error changing state:',error);}};// Function to navigate to Login page\nconst goToLogin=()=>{navigate(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Inflatables\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:goToLogin,children:\"Log Out\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:inflatables.map(inflatable=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:inflatable.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"State:\"}),\" \",inflatable.state]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>handleChangeState(inflatable._id),children:\"Change State\"})]},inflatable._id))})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","navigate","inflatables","setInflatables","fetchInflatables","response","get","concat","process","env","REACT_APP_BACKEND_URL","data","error","console","handleChangeState","inflatableId","log","patch","updatedInflatable","map","inflatable","_id","state","goToLogin","className","children","onClick","name"],"sources":["/Users/joao/Desktop/ManagementMargarida/public/src/pages/dashboard/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\nimport '../styles.css'; // Import common styles\n\nconst Dashboard = () => {\n  const navigate = useNavigate();\n\n  // State to store the list of inflatables\n  const [inflatables, setInflatables] = useState([]);\n\n  // Fetch inflatables data from backend on component mount\n  useEffect(() => {\n    const fetchInflatables = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/inflatables`);\n        setInflatables(response.data); // Update state with fetched data\n      } catch (error) {\n        console.error('Error fetching inflatables:', error);\n      }\n    };\n\n    fetchInflatables();\n  }, []); // Empty dependency array ensures this effect runs only once after initial render\n\n  // Function to handle changing state of an inflatable\n  const handleChangeState = async (inflatableId) => {\n    try {\n      console.log('Changing state for inflatableId:', inflatableId);\n      // Send PATCH request to backend to change inflatable state\n      const response = await axios.patch(`${process.env.REACT_APP_BACKEND_URL}/inflatable/${inflatableId}/change-state`);\n      console.log('Response from server:', response.data);\n  \n      // Update local state with the updated inflatable's state\n      const updatedInflatable = response.data;\n      setInflatables(inflatables.map(inflatable => {\n        if (inflatable._id === updatedInflatable._id) {\n          return { ...inflatable, state: updatedInflatable.state };\n        }\n        return inflatable;\n      }));\n    } catch (error) {\n      console.error('Error changing state:', error);\n    }\n  };\n\n  // Function to navigate to Login page\n  const goToLogin = () => {\n    navigate(\"/\");\n  };\n\n  return (\n    <div className=\"container\">\n      {/* Header section with title and logout button */}\n      <div className=\"header\">\n        <h2 className=\"title\">Inflatables</h2>\n        <button className=\"button\" onClick={goToLogin}>\n          Log Out\n        </button>\n      </div>\n      {/* List of inflatables */}\n      <ul className=\"list\">\n        {/* Map through inflatables and display each inflatable */}\n        {inflatables.map((inflatable) => (\n          <li key={inflatable._id} className=\"list-item\">\n            <h3>{inflatable.name}</h3>\n            <p><strong>State:</strong> {inflatable.state}</p>\n            {/* Button to change inflatable state */}\n            <button className=\"button\" onClick={() => handleChangeState(inflatable._id)}>Change State</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,eAAe,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExB,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAACO,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAElD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAX,KAAK,CAACY,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,qBAAqB,gBAAc,CAAC,CACpFP,cAAc,CAACE,QAAQ,CAACM,IAAI,CAAC,CAAE;AACjC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAEDR,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAAE;AAER;AACA,KAAM,CAAAU,iBAAiB,CAAG,KAAO,CAAAC,YAAY,EAAK,CAChD,GAAI,CACFF,OAAO,CAACG,GAAG,CAAC,kCAAkC,CAAED,YAAY,CAAC,CAC7D;AACA,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAX,KAAK,CAACuB,KAAK,IAAAV,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,qBAAqB,iBAAAH,MAAA,CAAeQ,YAAY,iBAAe,CAAC,CAClHF,OAAO,CAACG,GAAG,CAAC,uBAAuB,CAAEX,QAAQ,CAACM,IAAI,CAAC,CAEnD;AACA,KAAM,CAAAO,iBAAiB,CAAGb,QAAQ,CAACM,IAAI,CACvCR,cAAc,CAACD,WAAW,CAACiB,GAAG,CAACC,UAAU,EAAI,CAC3C,GAAIA,UAAU,CAACC,GAAG,GAAKH,iBAAiB,CAACG,GAAG,CAAE,CAC5C,MAAO,CAAE,GAAGD,UAAU,CAAEE,KAAK,CAAEJ,iBAAiB,CAACI,KAAM,CAAC,CAC1D,CACA,MAAO,CAAAF,UAAU,CACnB,CAAC,CAAC,CAAC,CACL,CAAE,MAAOR,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED;AACA,KAAM,CAAAW,SAAS,CAAGA,CAAA,GAAM,CACtBtB,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,mBACEF,KAAA,QAAKyB,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExB1B,KAAA,QAAKyB,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB5B,IAAA,OAAI2B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cACtC5B,IAAA,WAAQ2B,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEH,SAAU,CAAAE,QAAA,CAAC,SAE/C,CAAQ,CAAC,EACN,CAAC,cAEN5B,IAAA,OAAI2B,SAAS,CAAC,MAAM,CAAAC,QAAA,CAEjBvB,WAAW,CAACiB,GAAG,CAAEC,UAAU,eAC1BrB,KAAA,OAAyByB,SAAS,CAAC,WAAW,CAAAC,QAAA,eAC5C5B,IAAA,OAAA4B,QAAA,CAAKL,UAAU,CAACO,IAAI,CAAK,CAAC,cAC1B5B,KAAA,MAAA0B,QAAA,eAAG5B,IAAA,WAAA4B,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACL,UAAU,CAACE,KAAK,EAAI,CAAC,cAEjDzB,IAAA,WAAQ2B,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEA,CAAA,GAAMZ,iBAAiB,CAACM,UAAU,CAACC,GAAG,CAAE,CAAAI,QAAA,CAAC,cAAY,CAAQ,CAAC,GAJ3FL,UAAU,CAACC,GAKhB,CACL,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAAC,CAED,cAAe,CAAArB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}