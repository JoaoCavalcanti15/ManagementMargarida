{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./Dashboard.css';// Import your CSS file for styling\nimport{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const navigate=useNavigate();const[inflatables,setInflatables]=useState([]);useEffect(()=>{const fetchInflatables=async()=>{try{const response=await axios.get('http://localhost:4000/inflatables');setInflatables(response.data);}catch(error){console.error('Error fetching inflatables:',error);}};fetchInflatables();},[]);const handleChangeState=async inflatableId=>{try{console.log('Changing state for inflatableId:',inflatableId);const response=await axios.patch(\"http://localhost:4000/inflatable/\".concat(inflatableId,\"/change-state\"));console.log('Response from server:',response.data);// Update local state with the updated inflatable\nconst updatedInflatable=response.data;setInflatables(inflatables.map(inflatable=>{if(inflatable._id===updatedInflatable._id){return{...inflatable,state:updatedInflatable.state};}return inflatable;}));}catch(error){console.error('Error changing state:',error);}};// Handler for navigating to the login page\nconst goToLogin=()=>{navigate(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dashboard-title\",children:\"Inflatables\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:goToLogin,children:\"Log Out\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"inflatable-list\",children:inflatables.map(inflatable=>/*#__PURE__*/_jsxs(\"li\",{className:\"inflatable-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:inflatable.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"State:\"}),\" \",inflatable.state]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleChangeState(inflatable._id),children:\"Change State\"})]},inflatable._id))})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","navigate","inflatables","setInflatables","fetchInflatables","response","get","data","error","console","handleChangeState","inflatableId","log","patch","concat","updatedInflatable","map","inflatable","_id","state","goToLogin","className","children","onClick","name"],"sources":["/Users/joao/Desktop/ManagementMargarida/public/src/pages/dashboard/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './Dashboard.css'; // Import your CSS file for styling\nimport { useNavigate } from \"react-router-dom\";\n\nconst Dashboard = () => {\n  const navigate = useNavigate();\n  const [inflatables, setInflatables] = useState([]);\n\n  useEffect(() => {\n    const fetchInflatables = async () => {\n      try {\n        const response = await axios.get('http://localhost:4000/inflatables');\n        setInflatables(response.data);\n      } catch (error) {\n        console.error('Error fetching inflatables:', error);\n      }\n    };\n\n    fetchInflatables();\n  }, []);\n\n  const handleChangeState = async (inflatableId) => {\n    try {\n      console.log('Changing state for inflatableId:', inflatableId);\n      const response = await axios.patch(`http://localhost:4000/inflatable/${inflatableId}/change-state`);\n      console.log('Response from server:', response.data);\n  \n      // Update local state with the updated inflatable\n      const updatedInflatable = response.data;\n      setInflatables(inflatables.map(inflatable => {\n        if (inflatable._id === updatedInflatable._id) {\n          return { ...inflatable, state: updatedInflatable.state };\n        }\n        return inflatable;\n      }));\n    } catch (error) {\n      console.error('Error changing state:', error);\n    }\n  };\n\n  // Handler for navigating to the login page\n  const goToLogin = () => {\n    navigate(\"/\");\n  };\n\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"header\">\n        <h2 className=\"dashboard-title\">Inflatables</h2>\n        <button className=\"logout-button\" onClick={goToLogin}>\n            Log Out\n        </button>\n      </div>\n      <ul className=\"inflatable-list\">\n        {inflatables.map((inflatable) => (\n          <li key={inflatable._id} className=\"inflatable-item\">\n            <h3>{inflatable.name}</h3>\n            <p><strong>State:</strong> {inflatable.state}</p>\n            <button onClick={() => handleChangeState(inflatable._id)}>Change State</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}